{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nfunction QuestionsSqlComponent_div_14_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r4.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r4.description);\n  }\n}\nfunction QuestionsSqlComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"table\")(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Note\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"tbody\");\n    i0.ɵɵtemplate(9, QuestionsSqlComponent_div_14_tr_9_Template, 5, 2, \"tr\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.sqlResults);\n  }\n}\nfunction QuestionsSqlComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.errorMessage);\n  }\n}\nexport class QuestionsSqlComponent {\n  constructor(router, http) {\n    this.router = router;\n    this.http = http;\n    this.expectedSqlQuery = 'SELECT * FROM notes';\n    this.isCorrect = false;\n    this.sqlResults = [];\n    this.errorMessage = null;\n    this.userSqlQuery = ''; // Ajout de la propriété pour stocker la requête SQL de l'utilisateur\n  }\n\n  onSubmitQuiz() {\n    const confirmSubmit = confirm(\"Êtes-vous sûr de vouloir soumettre votre quiz? Cette action est irréversible.\");\n    if (confirmSubmit) {\n      this.router.navigateByUrl('/merci');\n    } else {\n      // Action annulée\n    }\n  }\n  executeSQL() {\n    const sqlQuery = document.getElementById('sql-query-input').value.trim();\n    const headers = new HttpHeaders().set('Content-Type', 'application/json');\n    this.http.post('http://localhost:5159/api/sql', JSON.stringify(sqlQuery), {\n      headers\n    }).subscribe(response => {\n      console.log('Résultat de la requête SQL :', response);\n      this.sqlResults = response;\n      // Comparaison de la requête de l'utilisateur avec la requête attendue\n      this.isCorrect = sqlQuery.toLowerCase() === this.expectedSqlQuery.toLowerCase();\n      console.log(this.isCorrect);\n      this.errorMessage = null;\n    }, error => {\n      console.error('Erreur lors de la soumission de la requête SQL :', error);\n      this.errorMessage = error.error;\n    });\n  }\n  static #_ = this.ɵfac = function QuestionsSqlComponent_Factory(t) {\n    return new (t || QuestionsSqlComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.HttpClient));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: QuestionsSqlComponent,\n    selectors: [[\"app-questions-sql\"]],\n    inputs: {\n      questionnaire: \"questionnaire\"\n    },\n    decls: 19,\n    vars: 2,\n    consts: [[1, \"container\"], [1, \"sql-query\"], [1, \"input-container\"], [\"id\", \"sql-query-input\", \"rows\", \"4\", \"cols\", \"50\"], [\"sqlQueryInput\", \"\"], [1, \"execute-btn\", 3, \"click\"], [1, \"sql-result\"], [\"class\", \"sql-result-content\", 4, \"ngIf\"], [1, \"actions\"], [1, \"submit-btn\", 3, \"click\"], [1, \"sql-result-content\"], [4, \"ngFor\", \"ngForOf\"]],\n    template: function QuestionsSqlComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \"Questionnaire SQL\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 1)(4, \"h3\");\n        i0.ɵɵtext(5, \"Requ\\u00EAte SQL :\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 2);\n        i0.ɵɵelement(7, \"textarea\", 3, 4);\n        i0.ɵɵelementStart(9, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function QuestionsSqlComponent_Template_button_click_9_listener() {\n          return ctx.executeSQL();\n        });\n        i0.ɵɵtext(10, \"\\u25B6\\uFE0F\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 6)(12, \"h3\");\n        i0.ɵɵtext(13, \"R\\u00E9sultat de la requ\\u00EAte :\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(14, QuestionsSqlComponent_div_14_Template, 10, 1, \"div\", 7);\n        i0.ɵɵtemplate(15, QuestionsSqlComponent_div_15_Template, 3, 1, \"div\", 7);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 8)(17, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function QuestionsSqlComponent_Template_button_click_17_listener() {\n          return ctx.onSubmitQuiz();\n        });\n        i0.ɵɵtext(18, \"Soumettre\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngIf\", !ctx.errorMessage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf],\n    styles: [\".sql-query[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sql-result-content[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    background-color: black;\\r\\n    color: white;\\r\\n    border: 1px solid #ccc;\\r\\n    padding: 10px;\\r\\n    box-sizing: border-box;\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.container[_ngcontent-%COMP%] {\\r\\n    max-width: 80%;\\r\\n    margin: 0 auto;\\r\\n    padding: 20px;\\r\\n    background-color: white;\\r\\n    border-radius: 10px;\\r\\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.question[_ngcontent-%COMP%] {\\r\\n    margin-bottom: 20px;\\r\\n}\\r\\n\\r\\n.actions[_ngcontent-%COMP%] {\\r\\n    margin-top: 20px;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\n.submit-btn[_ngcontent-%COMP%], .execute-btn[_ngcontent-%COMP%] {\\r\\n    padding: 10px 20px;\\r\\n    margin-right: 10px;\\r\\n    cursor: pointer;\\r\\n    border: none;\\r\\n    background-color: #2c216e;\\r\\n    color: white;\\r\\n    border-radius: 5px;\\r\\n}\\r\\n\\r\\ntable[_ngcontent-%COMP%] {\\r\\n    border-collapse: collapse;\\r\\n    width: 100%;\\r\\n    border: 1px dashed white;\\r\\n    background-color: black;\\r\\n    color: white;\\r\\n}\\r\\n\\r\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n    border: 1px solid #ddd;\\r\\n    padding: 8px;\\r\\n    text-align: left;\\r\\n}\\r\\n\\r\\nth[_ngcontent-%COMP%] {\\r\\n    background-color: #333;\\r\\n}\\r\\n\\r\\ntr[_ngcontent-%COMP%]:nth-child(even) {\\r\\n    background-color: #666;\\r\\n}\\r\\n\\r\\ntr[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #888;\\r\\n}\\r\\n\\r\\n.input-container[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.execute-btn[_ngcontent-%COMP%] {\\r\\n    position: absolute;\\r\\n    top: 5px;\\r\\n    right: 5px;\\r\\n    background-color: none;\\r\\n    color: white;\\r\\n    border: none;\\r\\n    padding: 5px;\\r\\n    cursor: pointer;\\r\\n    border-radius: 3px;\\r\\n    outline: none;\\r\\n}\\r\\n\\r\\n.execute-btn[_ngcontent-%COMP%]:hover {\\r\\n    background-color: darkblue;\\r\\n}\\r\\n\\r\\n@media only screen and (max-width: 768px) {\\r\\n    .container[_ngcontent-%COMP%] {\\r\\n        max-width: 90%;\\r\\n        padding: 15px;\\r\\n    }\\r\\n}\\r\\n\\r\\n@media only screen and (max-width: 576px) {\\r\\n    .container[_ngcontent-%COMP%] {\\r\\n        max-width: 95%;\\r\\n    }\\r\\n    .submit-btn[_ngcontent-%COMP%], .execute-btn[_ngcontent-%COMP%] {\\r\\n        padding: 8px 16px;\\r\\n    }\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvU1FML3F1ZXN0aW9ucy1zcWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7SUFFSSxXQUFXO0lBQ1gsdUJBQXVCO0lBQ3ZCLFlBQVk7SUFDWixzQkFBc0I7SUFDdEIsYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxjQUFjO0lBQ2QsY0FBYztJQUNkLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsbUJBQW1CO0lBQ25CLHVDQUF1QztBQUMzQzs7QUFFQTtJQUNJLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLGdCQUFnQjtJQUNoQixrQkFBa0I7QUFDdEI7O0FBRUE7O0lBRUksa0JBQWtCO0lBQ2xCLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2YsWUFBWTtJQUNaLHlCQUF5QjtJQUN6QixZQUFZO0lBQ1osa0JBQWtCO0FBQ3RCOztBQUVBO0lBQ0kseUJBQXlCO0lBQ3pCLFdBQVc7SUFDWCx3QkFBd0I7SUFDeEIsdUJBQXVCO0lBQ3ZCLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSxzQkFBc0I7SUFDdEIsWUFBWTtJQUNaLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixRQUFRO0lBQ1IsVUFBVTtJQUNWLHNCQUFzQjtJQUN0QixZQUFZO0lBQ1osWUFBWTtJQUNaLFlBQVk7SUFDWixlQUFlO0lBQ2Ysa0JBQWtCO0lBQ2xCLGFBQWE7QUFDakI7O0FBRUE7SUFDSSwwQkFBMEI7QUFDOUI7O0FBRUE7SUFDSTtRQUNJLGNBQWM7UUFDZCxhQUFhO0lBQ2pCO0FBQ0o7O0FBRUE7SUFDSTtRQUNJLGNBQWM7SUFDbEI7SUFDQTs7UUFFSSxpQkFBaUI7SUFDckI7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbIi5zcWwtcXVlcnkgdGV4dGFyZWEsXHJcbi5zcWwtcmVzdWx0LWNvbnRlbnQge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbn1cclxuXHJcbi5jb250YWluZXIge1xyXG4gICAgbWF4LXdpZHRoOiA4MCU7XHJcbiAgICBtYXJnaW46IDAgYXV0bztcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgICBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDAsIDAsIDAsIDAuMyk7XHJcbn1cclxuXHJcbi5xdWVzdGlvbiB7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG59XHJcblxyXG4uYWN0aW9ucyB7XHJcbiAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4uc3VibWl0LWJ0bixcclxuLmV4ZWN1dGUtYnRuIHtcclxuICAgIHBhZGRpbmc6IDEwcHggMjBweDtcclxuICAgIG1hcmdpbi1yaWdodDogMTBweDtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMyYzIxNmU7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuXHJcbnRhYmxlIHtcclxuICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGJvcmRlcjogMXB4IGRhc2hlZCB3aGl0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG50aCwgdGQge1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbn1cclxuXHJcbnRoIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICMzMzM7XHJcbn1cclxuXHJcbnRyOm50aC1jaGlsZChldmVuKSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjY2O1xyXG59XHJcblxyXG50cjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODg4O1xyXG59XHJcblxyXG4uaW5wdXQtY29udGFpbmVyIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxufVxyXG5cclxuLmV4ZWN1dGUtYnRuIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHRvcDogNXB4O1xyXG4gICAgcmlnaHQ6IDVweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IG5vbmU7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBwYWRkaW5nOiA1cHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICBib3JkZXItcmFkaXVzOiAzcHg7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG59XHJcblxyXG4uZXhlY3V0ZS1idG46aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogZGFya2JsdWU7XHJcbn1cclxuXHJcbkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAgIC5jb250YWluZXIge1xyXG4gICAgICAgIG1heC13aWR0aDogOTAlO1xyXG4gICAgICAgIHBhZGRpbmc6IDE1cHg7XHJcbiAgICB9XHJcbn1cclxuXHJcbkBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogNTc2cHgpIHtcclxuICAgIC5jb250YWluZXIge1xyXG4gICAgICAgIG1heC13aWR0aDogOTUlO1xyXG4gICAgfVxyXG4gICAgLnN1Ym1pdC1idG4sXHJcbiAgICAuZXhlY3V0ZS1idG4ge1xyXG4gICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"AAAA,SAAqBA,WAAW,QAA2B,sBAAsB;;;;;;;ICoB3DC,0BAAoC;IAC5BA,YAAa;IAAAA,iBAAK;IACtBA,0BAAI;IAAAA,YAAsB;IAAAA,iBAAK;;;;IAD3BA,eAAa;IAAbA,gCAAa;IACbA,eAAsB;IAAtBA,yCAAsB;;;;;IAX1CA,+BAAsD;IAIlCA,kBAAE;IAAAA,iBAAK;IACXA,0BAAI;IAAAA,oBAAI;IAAAA,iBAAK;IAGrBA,6BAAO;IACHA,4EAGK;IACTA,iBAAQ;;;;IAJiBA,eAAa;IAAbA,2CAAa;;;;;IAO9CA,+BAAqD;IAC3CA,YAAkB;IAAAA,iBAAO;;;;IAAzBA,eAAkB;IAAlBA,yCAAkB;;;ADbtC,OAAM,MAAOC,qBAAqB;EAUhCC,YAAoBC,MAAc,EAAUC,IAAgB;IAAxC,WAAM,GAAND,MAAM;IAAkB,SAAI,GAAJC,IAAI;IANhD,qBAAgB,GAAW,qBAAqB;IAChD,cAAS,GAAY,KAAK;IAC1B,eAAU,GAAgB,EAAE;IAC5B,iBAAY,GAAkB,IAAI;IAClC,iBAAY,GAAW,EAAE,CAAC,CAAC;EAEqC;;EAEhEC,YAAY;IACV,MAAMC,aAAa,GAAGC,OAAO,CAAC,+EAA+E,CAAC;IAC9G,IAAID,aAAa,EAAE;MACjB,IAAI,CAACH,MAAM,CAACK,aAAa,CAAC,QAAQ,CAAC;KACpC,MAAM;MACL;IAAA;EAEJ;EAEAC,UAAU;IACR,MAAMC,QAAQ,GAAIC,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAyB,CAACC,KAAK,CAACC,IAAI,EAAE;IAAK,MAAMC,OAAO,GAAG,IAAIhB,WAAW,EAAE,CAACiB,GAAG,CAAC,cAAc,EAAE,kBAAkB,CAAC;IAE/K,IAAI,CAACZ,IAAI,CAACa,IAAI,CAAc,+BAA+B,EAAEC,IAAI,CAACC,SAAS,CAACT,QAAQ,CAAC,EAAE;MAAEK;IAAO,CAAE,CAAC,CAACK,SAAS,CAC3GC,QAAQ,IAAG;MACTC,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEF,QAAQ,CAAC;MACrD,IAAI,CAACG,UAAU,GAAGH,QAAQ;MAC1B;MACA,IAAI,CAACI,SAAS,GAAGf,QAAQ,CAACgB,WAAW,EAAE,KAAK,IAAI,CAACC,gBAAgB,CAACD,WAAW,EAAE;MAC/EJ,OAAO,CAACC,GAAG,CAAC,IAAI,CAACE,SAAS,CAAC;MAC3B,IAAI,CAACG,YAAY,GAAG,IAAI;IAC1B,CAAC,EACAC,KAAwB,IAAI;MAC3BP,OAAO,CAACO,KAAK,CAAC,kDAAkD,EAAEA,KAAK,CAAC;MACxE,IAAI,CAACD,YAAY,GAAGC,KAAK,CAACA,KAAK;IACjC,CAAC,CACF;EACH;EAAC;qBAtCU5B,qBAAqB;EAAA;EAAA;UAArBA,qBAAqB;IAAA6B;IAAAC;MAAAC;IAAA;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCflCpC,8BAAuB;QACjBA,iCAAiB;QAAAA,iBAAK;QAE1BA,8BAAuB;QACfA,kCAAa;QAAAA,iBAAK;QACtBA,8BAA6B;QAC3BA,iCAA4E;QAC5EA,iCAAmD;QAAvBA;UAAA,OAASqC,gBAAY;QAAA,EAAC;QAACrC,6BAAE;QAAAA,iBAAS;QAEhEA,+BAAwB;QAChBA,mDAAwB;QAAAA,iBAAK;QACjCA,yEAeM;QACNA,wEAEM;QACVA,iBAAM;QAGVA,+BAAqB;QACUA;UAAA,OAASqC,kBAAc;QAAA,EAAC;QAACrC,0BAAS;QAAAA,iBAAS;;;QAvBjCA,gBAAmB;QAAnBA,wCAAmB;QAgBnBA,eAAkB;QAAlBA,uCAAkB","names":["HttpHeaders","i0","QuestionsSqlComponent","constructor","router","http","onSubmitQuiz","confirmSubmit","confirm","navigateByUrl","executeSQL","sqlQuery","document","getElementById","value","trim","headers","set","post","JSON","stringify","subscribe","response","console","log","sqlResults","isCorrect","toLowerCase","expectedSqlQuery","errorMessage","error","selectors","inputs","questionnaire","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\shehn\\Music\\Andex PFE\\FrontEnd\\src\\app\\SQL\\questions-sql.component.ts","C:\\Users\\shehn\\Music\\Andex PFE\\FrontEnd\\src\\app\\SQL\\questions-sql.component.html"],"sourcesContent":["import { HttpClient, HttpHeaders, HttpErrorResponse } from '@angular/common/http';\nimport { Component, Input } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Questionnaire } from '../models/Questionnaire';\n\ninterface SqlResult {\n  id: number;\n  description: string;\n}\n\n@Component({\n  selector: 'app-questions-sql',\n  templateUrl: './questions-sql.component.html',\n  styleUrls: ['./questions-sql.component.css']\n})\nexport class QuestionsSqlComponent {\n  @Input() questionnaire!: Questionnaire;\n\n\n  expectedSqlQuery: string = 'SELECT * FROM notes';\n  isCorrect: boolean = false;\n  sqlResults: SqlResult[] = [];\n  errorMessage: string | null = null;\n  userSqlQuery: string = ''; // Ajout de la propriété pour stocker la requête SQL de l'utilisateur\n\n  constructor(private router: Router, private http: HttpClient) { }\n\n  onSubmitQuiz() {\n    const confirmSubmit = confirm(\"Êtes-vous sûr de vouloir soumettre votre quiz? Cette action est irréversible.\");\n    if (confirmSubmit) {\n      this.router.navigateByUrl('/merci');\n    } else {\n      // Action annulée\n    }\n  }\n\n  executeSQL() {\n    const sqlQuery = (document.getElementById('sql-query-input') as HTMLTextAreaElement).value.trim();    const headers = new HttpHeaders().set('Content-Type', 'application/json');\n  \n    this.http.post<SqlResult[]>('http://localhost:5159/api/sql', JSON.stringify(sqlQuery), { headers }).subscribe(\n      response => {\n        console.log('Résultat de la requête SQL :', response);\n        this.sqlResults = response;\n        // Comparaison de la requête de l'utilisateur avec la requête attendue\n        this.isCorrect = sqlQuery.toLowerCase() === this.expectedSqlQuery.toLowerCase();\n        console.log(this.isCorrect);\n        this.errorMessage = null;\n      },\n      (error: HttpErrorResponse) => {\n        console.error('Erreur lors de la soumission de la requête SQL :', error);\n        this.errorMessage = error.error;\n      }\n    );\n  }\n}\n","<div class=\"container\">\n  <h1>Questionnaire SQL</h1>\n  <!-- Zone de saisie SQL -->\n  <div class=\"sql-query\">\n      <h3>Requête SQL :</h3>\n      <div class=\"input-container\">\n        <textarea #sqlQueryInput id=\"sql-query-input\" rows=\"4\" cols=\"50\"></textarea>\n        <button class=\"execute-btn\" (click)=\"executeSQL()\">▶️</button>\n    </div>\n      <div class=\"sql-result\">\n          <h3>Résultat de la requête :</h3>\n          <div class=\"sql-result-content\" *ngIf=\"!errorMessage\">\n              <table>\n                  <thead>\n                      <tr>\n                          <th>ID</th>\n                          <th>Note</th>\n                      </tr>\n                  </thead>\n                  <tbody>\n                      <tr *ngFor=\"let item of sqlResults\">\n                          <td>{{ item.id }}</td>\n                          <td>{{ item.description }}</td>\n                      </tr>\n                  </tbody>\n              </table>\n          </div>\n          <div class=\"sql-result-content\" *ngIf=\"errorMessage\">\n              <span>{{ errorMessage }}</span>\n          </div>\n      </div>\n  </div>\n  <!-- Boutons de soumission et de réinitialisation pour les questions QCM -->\n  <div class=\"actions\">\n      <button class=\"submit-btn\" (click)=\"onSubmitQuiz()\">Soumettre</button>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}