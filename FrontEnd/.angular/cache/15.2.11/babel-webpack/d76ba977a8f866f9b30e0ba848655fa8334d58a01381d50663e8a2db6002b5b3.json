{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { ScaleType } from '@swimlane/ngx-charts';\nlet StatistiquesComponent = class StatistiquesComponent {\n  constructor(avisClientService, reponseService, questionService, questionnaireService, qcmService, quizService, candidatService, changeDetectorRef) {\n    this.avisClientService = avisClientService;\n    this.reponseService = reponseService;\n    this.questionService = questionService;\n    this.questionnaireService = questionnaireService;\n    this.qcmService = qcmService;\n    this.quizService = quizService;\n    this.candidatService = candidatService;\n    this.changeDetectorRef = changeDetectorRef;\n    this.reponses65Plus = 0;\n    this.reponses85Plus = 0;\n    this.totalQCMs = 0;\n    this.totalQuestionnaires = 0;\n    this.totalQuizzes = 0;\n    this.totalCandidates = 0;\n    this.highScoreQuizzes = 0;\n    this.highCorrectAnswersQuestions = 0;\n    this.totalQuestions = 0;\n    this.view = [400, 300]; // Ajuster la taille des graphiques ici\n    this.showXAxis = true;\n    this.showYAxis = true;\n    this.gradient = false;\n    this.showLegend = true;\n    this.showXAxisLabel = true;\n    this.showYAxisLabel = true;\n    this.xAxisLabel = 'Étoiles';\n    this.yAxisLabel = 'Nombre';\n    // Définition du schéma de couleur\n    this.colorScheme = {\n      name: 'custom',\n      selectable: true,\n      group: ScaleType.Ordinal,\n      domain: ['#00214F', '#F6E211', '#E7E6E6']\n    };\n    this.data = [];\n    this.barData = [];\n    this.pieData = [];\n  }\n  ngOnInit() {\n    this.fetchStatistiques();\n    this.fetchCountReponsesByScore();\n    this.fetchStatistiquesCount();\n  }\n  fetchCountReponsesByScore() {\n    this.candidatService.getStatsScoreCandidats().subscribe(result => {\n      console.log('Pie Data received:', result);\n      this.reponses65Plus = result.Above68Percent; // Ajustez les noms en fonction des clés de votre API\n      this.reponses85Plus = result.Below40Percent; // Ajustez les noms en fonction des clés de votre API\n      this.pieData = [{\n        name: '> 68%',\n        value: this.reponses65Plus\n      }, {\n        name: '< 40%',\n        value: this.reponses85Plus\n      }];\n      console.log('Updated Pie Data:', this.pieData);\n      this.changeDetectorRef.detectChanges();\n    }, error => {\n      console.error('Error fetching count of responses by score:', error);\n    });\n  }\n  fetchStatistiques() {\n    this.avisClientService.getAvisCountByStars().subscribe(statistiques => {\n      this.barData = Object.keys(statistiques).map(rating => ({\n        name: `${rating} étoile(s)`,\n        value: statistiques[rating]\n      }));\n      console.log('Updated Bar Data:', this.barData);\n      this.changeDetectorRef.detectChanges();\n    });\n  }\n  fetchStatistiquesCount() {\n    this.candidatService.getTotalCandidatsCount().subscribe(count => {\n      this.totalCandidates = count;\n      this.updateChartData();\n    });\n    this.questionService.getTotalQuestionCount().subscribe(count => {\n      this.totalQuestions = count;\n      this.updateChartData();\n    });\n    this.questionnaireService.getTotalQuestionnaireCount().subscribe(count => {\n      this.totalQuestionnaires = count;\n      this.updateChartData();\n    });\n    this.qcmService.getTotalQcmCount().subscribe(count => {\n      this.totalQCMs = count;\n      this.updateChartData();\n    });\n    this.quizService.getTotalQuizCount().subscribe(count => {\n      this.totalQuizzes = count;\n      this.updateChartData();\n    });\n  }\n  updateChartData() {\n    this.data = [{\n      name: 'Total Questions',\n      value: this.totalQuestions\n    }, {\n      name: 'Total Questionnaires',\n      value: this.totalQuestionnaires\n    }, {\n      name: 'Total QCMs',\n      value: this.totalQCMs\n    }, {\n      name: 'Total Quizzes',\n      value: this.totalQuizzes\n    }, {\n      name: 'Total Candidats',\n      value: this.totalCandidates\n    }];\n    console.log('Updated Bar Data:', this.data);\n    this.changeDetectorRef.detectChanges();\n  }\n};\nStatistiquesComponent = __decorate([Component({\n  selector: 'app-statistiques',\n  templateUrl: './statistiques.component.html',\n  styleUrls: ['./statistiques.component.css']\n})], StatistiquesComponent);\nexport { StatistiquesComponent };","map":{"version":3,"mappings":"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","names":["Component","ScaleType","StatistiquesComponent","constructor","avisClientService","reponseService","questionService","questionnaireService","qcmService","quizService","candidatService","changeDetectorRef","name","selectable","group","Ordinal","domain","ngOnInit","fetchStatistiques","fetchCountReponsesByScore","fetchStatistiquesCount","getStatsScoreCandidats","subscribe","result","console","log","reponses65Plus","Above68Percent","reponses85Plus","Below40Percent","pieData","value","detectChanges","error","getAvisCountByStars","statistiques","barData","Object","keys","map","rating","getTotalCandidatsCount","count","totalCandidates","updateChartData","getTotalQuestionCount","totalQuestions","getTotalQuestionnaireCount","totalQuestionnaires","getTotalQcmCount","totalQCMs","getTotalQuizCount","totalQuizzes","data","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\shehn\\Music\\Andex PFE\\FrontEnd\\src\\app\\statistiques\\statistiques.component.ts"],"sourcesContent":["import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { Color, ScaleType } from '@swimlane/ngx-charts';\nimport { AvisClientService } from '../Services/AvisClientService';\nimport { ReponseService } from '../Services/ReponseService';\nimport { QuestionService } from '../Services/QuestionService';\nimport { QCMService } from '../Services/QCMService';\nimport { QuizService } from '../Services/QuizService';\nimport { CandidatService } from '../Services/CandidatService';\nimport { QuestionnaireService } from '../Services/QuestionnaireService';\n\n@Component({\n  selector: 'app-statistiques',\n  templateUrl: './statistiques.component.html',\n  styleUrls: ['./statistiques.component.css']\n})\nexport class StatistiquesComponent implements OnInit {\n  reponses65Plus: number = 0;\n  reponses85Plus: number = 0;\n  totalQCMs: number = 0;\n  totalQuestionnaires: number = 0;\n  totalQuizzes: number = 0;\n  totalCandidates: number = 0;\n  highScoreQuizzes: number = 0;\n  highCorrectAnswersQuestions: number = 0;\n  totalQuestions: number = 0;\n  view: [number, number] = [400, 300]; // Ajuster la taille des graphiques ici\n  showXAxis = true;\n  showYAxis = true;\n  gradient = false;\n  showLegend = true;\n  showXAxisLabel = true;\n  showYAxisLabel = true;\n  xAxisLabel = 'Étoiles';\n  yAxisLabel = 'Nombre';\n\n  // Définition du schéma de couleur\n  colorScheme: Color = {\n    name: 'custom',\n    selectable: true,\n    group: ScaleType.Ordinal,\n    domain: ['#00214F', '#F6E211', '#E7E6E6']\n  };\n  \n  data: any[] = [];\n  barData: any[] = [];\n  pieData: any[] = [];\n\n  constructor(\n    private avisClientService: AvisClientService,\n    private reponseService: ReponseService,\n    private questionService: QuestionService,\n    private questionnaireService: QuestionnaireService,\n    private qcmService: QCMService,\n    private quizService: QuizService,\n    private candidatService: CandidatService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) { }\n\n  ngOnInit(): void {\n    this.fetchStatistiques();\n    this.fetchCountReponsesByScore();\n    this.fetchStatistiquesCount();\n  }\n\n  fetchCountReponsesByScore(): void {\n    this.candidatService.getStatsScoreCandidats().subscribe(\n      (result: any) => {\n        console.log('Pie Data received:', result); \n        this.reponses65Plus = result.Above68Percent; // Ajustez les noms en fonction des clés de votre API\n        this.reponses85Plus = result.Below40Percent; // Ajustez les noms en fonction des clés de votre API\n  \n        this.pieData = [\n          { name: '> 68%', value: this.reponses65Plus },\n          { name: '< 40%', value: this.reponses85Plus }\n        ];\n  \n        console.log('Updated Pie Data:', this.pieData); \n        this.changeDetectorRef.detectChanges();\n      },\n      (error: any) => {\n        console.error('Error fetching count of responses by score:', error);\n      }\n    );\n  }\n  \n\n  fetchStatistiques(): void {\n    this.avisClientService.getAvisCountByStars().subscribe(statistiques => {\n      this.barData = Object.keys(statistiques).map(rating => ({\n        name: `${rating} étoile(s)`,\n        value: statistiques[rating]\n      }));\n      console.log('Updated Bar Data:', this.barData);\n      this.changeDetectorRef.detectChanges();\n    });\n  }\n\n  fetchStatistiquesCount(): void {\n    this.candidatService.getTotalCandidatsCount().subscribe(count => {\n      this.totalCandidates = count;\n      this.updateChartData();\n    });\n    \n    this.questionService.getTotalQuestionCount().subscribe(count => {\n      this.totalQuestions = count;\n      this.updateChartData();\n    });\n\n    this.questionnaireService.getTotalQuestionnaireCount().subscribe(count => {\n      this.totalQuestionnaires = count;\n      this.updateChartData();\n    });\n\n    this.qcmService.getTotalQcmCount().subscribe(count => {\n      this.totalQCMs = count;\n      this.updateChartData();\n    });\n\n    this.quizService.getTotalQuizCount().subscribe(count => {\n      this.totalQuizzes = count;\n      this.updateChartData();\n    });\n  }\n\n  updateChartData(): void {\n    this.data = [\n      { name: 'Total Questions', value: this.totalQuestions },\n      { name: 'Total Questionnaires', value: this.totalQuestionnaires },\n      { name: 'Total QCMs', value: this.totalQCMs },\n      { name: 'Total Quizzes', value: this.totalQuizzes },\n      { name: 'Total Candidats', value: this.totalCandidates }\n    ];\n    console.log('Updated Bar Data:', this.data); \n    this.changeDetectorRef.detectChanges();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}